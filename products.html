<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Results - Carita Hidroponik</title>
  <link rel="icon" href="img/Logo.jpg" type="image/jpg" />
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/mobile.css" media="(max-width: 768px)" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body x-data @alpine:init="
  $store.products.init();
  $store.cart.init();
">

  <div id="header-include"></div>

  <main class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
    <div x-data="productSearch" x-init="init()">
      <div class="page-header">
        <div class="header-left">
          <h1>Search Results for "<span x-text="searchTerm"></span>"</h1>
          <p class="muted" x-show="!isLoading"><span x-text="filteredProducts.length"></span> results found.</p>
        </div>
      </div>

      <p x-show="isLoading" class="loading-text">Loading products...</p>

      <div x-show="!isLoading" x-transition>
        <div class="products-grid" id="productsGrid">
          <template x-for="item in paginatedItems()" :key="item.id">
            <div x-html="renderProductCard(item)"></div>
          </template>
        </div>

        <div x-show="filteredProducts.length === 0" class="no-products-message">
          <p>No products found matching your search. Try a different keyword.</p>
        </div>

        <nav class="pagination" x-show="totalPages() > 1">
          <a href="#" @click.prevent="goToPage(currentPage - 1)" x-show="currentPage > 1" aria-label="Previous Page">&laquo;</a>
          <template x-for="page in totalPages()" :key="page">
            <a href="#" @click.prevent="goToPage(page)" :class="{ 'active': page === currentPage }" x-text="page"></a>
          </template>
          <a href="#" @click.prevent="goToPage(currentPage + 1)" x-show="currentPage < totalPages()" aria-label="Next Page">&raquo;</a>
        </nav>
      </div>
    </div>
  </main>

  <div id="footer-include"></div>

  <script src="https://unpkg.com/feather-icons"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.10/dist/cdn.min.js?nounit=true" defer></script>

  <script src="js/supabase-client.js"></script>
  <script src="js/main.js"></script>
  <script src="js/products.js"></script>
  <script src="js/include.js" defer></script>
  <script src="js/script.js"></script>

</body>
</html>
